---
layout: post
title:  "Apache Kafka"
summary: "What is Apache Kafka?"
author: seunghwan
date: '2024-03-07 00:00:00 +0530'
category: ['Apache Spark']
tags: Pyspark
usemathjax: false
permalink: /blog/Apache-Kafka/
---

## Apache Kafka란?
Apache Kafka는 시작 또는 끝이 없는 스트리밍 이벤트 데이터나 일반 데이터를 수집, 처리, 저장하는데 사용되는 분산 메세지 스트리밍 플랫폼입니다. 대용량 실시간 로그처리에 특화된만큼 Fault-Tolerant 한 안정적인 아키텍처를 제공하며, 분산 애플리케이션 확장을 통해 스트리밍 이벤트를 분당 수십억 개까지 처리할 수 있고 필요한 모든곳에서 대규모 데이터를 동시에 이동할 수 있습니다. 이 외에도 스트리밍 데이터를 가져와 정확히 언제 무슨 일이 일어났는지 기록합니다. 이 기록은 변경 불가능한 커밋 로그라고 합니다. 즉 추가는 가능하지만 변경은 불가능합니다. 로그에 있는 데이터에 액세스할 수 있으며, 개수 제한 없이 여러 스트리밍 실시간 애플리케이션과 다른 시스템에서 로그에 데이터를 추가할 수도 있습니다.

* Producer/Consumber와 Publish/Subscribe을 같은 의미로 사용하고 있었습니다

## 작동 방식: Kafka vs. Redis 게시/구독

Apache Kafka는 여러 애플리케이션이 서로 독립적으로 데이터를 스트리밍할 수 있게 해주는 이벤트 스트리밍 플랫폼입니다. *생산자* 및 *소비자*라고 하는 이러한 애플리케이션은 *주제*라고 하는 특정 데이터 파티션에 정보를 게시하고 구독합니다.

한편 Redis는 애플리케이션 간 지연 시간이 짧은 데이터 전송을 지원하는 인 메모리 데이터베이스로 설계되었습니다. 모든 메시지를 하드 디스크 대신 RAM에 저장하여 데이터 읽기 및 쓰기 시간을 줄입니다. Kafka와 마찬가지로 여러 소비자가 Redis 스트림을 구독하여 메시지를 검색할 수 있습니다.

게시/구독 메시징에 둘 다 사용할 수 있지만 Kafka와 Redis는 다르게 작동합니다.

## Kafka 워크플로

Apache Kafka는 컴퓨팅 클러스터를 통해 생산자와 소비자를 연결합니다. 각 클러스터는 서로 다른 서버에 있는 여러 Kafka 브로커로 구성됩니다.

Kafka는 다음과 같은 목적으로 주제 및 파티션을 생성합니다.

- 이메일, 결제, 사용자, 구매 등 관심 주제에 속하는 유사 데이터를 그룹화하는 주제
- 데이터 복제 및 내결함성을 위해 여러 브로커에 걸쳐 파티셔닝

생산자는 브로커에게 메시지를 게시합니다. 브로커는 메시지를 수신하면 데이터를 주제로 분류하고 데이터를 파티션에 저장합니다. 소비자는 관련 주제에 연결하여 해당 파티션에서 데이터를 추출합니다.